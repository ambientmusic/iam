<!doctype html>
<html>
  <head>
    <title>Melody | Harmony | Rhythm</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <style type="text/css">

      *:focus {
       outline: none;
      }
      #login, #loggedin, {
        display: none;
      }
      .text-overflow {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 500px;
      }

    </style>
  </head>

  <body style="background-color:white;"><br>
    <div class="container">

    <div width="50%"; style="float:right;padding-top:55px;padding-left:10px;"><img src="img/13.jpg" width="132" height="132" ></img><img src="img/2.jpg" width="132" height="132" ></img><img src="img/3.jpg" width="132" height="132" ></img><img src="img/4.jpg" width="132" height="132" ></img><br><img src="img/5.jpg" width="132" height="132" ></img><img src="img/6.jpg" width="132" height="132" ></img><img src="img/7.jpg" width="132" height="132" ></img><img src="img/8.jpg" width="132" height="132" ><br></img><img src="img/9.jpg" width="132" height="132" ></img><img src="img/10.jpg" width="132" height="132" ></img><img src="img/11.jpg" width="132" height="132" ></img><img src="img/12.jpg" width="132" height="132" ><br></img><img src="img/1.jpg" width="132" height="132" ></img><img src="img/14.jpg" width="132" height="132" ></img><img src="img/15.jpg" width="132" height="132" ></img><img src="img/16.jpg" width="132" height="132" ></img></div>

      <div id="login">
        <h2 style="margin-top:-10px;margin-bottom:-15px">Ambient Music International</h2><br><span style="color:#428BCA"><i>A Quotation from Plato?</i></span>
      <textarea  autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" style="resize: none;border:0;background:white;text-align:justify;height:455px; width:580px;">"Music is a moral law. It gives a soul to the universe, wings to the mind, flight to the imagination, a charm to sadness, and life to everything. It is the essence of order, and leads to all that is good, just and beautiful, of which it is the invisible, but nevertheless dazzling, passionate, and eternal form."&#013;&#010;&#013;&#010;For all the good that technology has brought into our lives, one of the downsides is the inability to make telling connections with the music made available to communities as a whole. Largely the result of national-bias, commercial transience and control factors.&#013;&#010;&#013;&#010;Compiling well thought out playlists is time-consuming and not an easy option for industrious people. Carefully pre-selected music helps us to discern the wood from the trees (more than 35 million of them!) and stacks the odds in favour of finding time to listen to great music. &#013;&#010;&#013;&#010;AMI adds an option for quick access to music created by world-renowned (and some not so well known) must-be-listened-to musicians that may well suit you.&#013;&#010;&#013;&#010;This website version is free to Spotify licence-holders. In addition to opening the door to a wide range of tasteful international music, our growing array of synchronised, multi-language lyrics and related artist information might also be of interest.&#013;&#010;&#013;&#010;In summary, we aim to add value through the use of selected world-class melodies, harmonies and rhythms - compiled with care for you. At least give something different a try. </textarea><br><span style="color:#428BCA"><i>Privacy Statement</i></span> <textarea autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" style="resize: none;border:0;background:white;text-align:justify;height:120px; width:580px;">If you choose to take a closer look, you will notice a request to authorise access to some of your Spotify data. This data is limited to Your Public Playlists, The Type of Device You're Listening On and The Track You're Playing.  However, permission can easily be reversed by you at any time. This site creates cookies for use by Spotify to personalise your experience, to show you ads based on your interests, and for measurement and analytics purposes.</textarea><a href="/login" class="btn btn-primary" style="margin-left:612px;margin-top:-110px;">Connect AMI to Spotify</a>
</div>
</div>


    <script id="user-profile-template" type="text/x-handlebars-template">
      <h1>Logged in as {{display_name}}</h1>
      <div class="media">
        <div class="pull-left">
          <img class="media-object" width="150" src="{{images.0.url}}" />
        </div>
        <div class="media-body">
          <dl class="dl-horizontal">
            <dt>Display name</dt><dd class="clearfix">{{display_name}}</dd>
            <dt>Id</dt><dd>{{id}}</dd>
            <dt>Email</dt><dd>{{email}}</dd>
            <dt>Spotify URI</dt><dd><a href="{{external_urls.spotify}}">{{external_urls.spotify}}</a></dd>
            <dt>Link</dt><dd><a href="{{href}}">{{href}}</a></dd>
            <dt>Profile Image</dt><dd class="clearfix"><a href="{{images.0.url}}">{{images.0.url}}</a></dd>
            <dt>Country</dt><dd>{{country}}</dd>
          </dl>
        </div>
      </div>
    </script>

    <script id="oauth-template" type="text/x-handlebars-template">
      <h2>oAuth info</h2>
      <dl class="dl-horizontal">
        <dt>Access token</dt><dd class="text-overflow">{{access_token}}</dd>
        <dt>Refresh token</dt><dd class="text-overflow">{{refresh_token}}</dd>
      </dl>
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script>
      (function() {

        /**
         * Obtains parameters from the hash of the URL
         * @return Object
         */
        function getHashParams() {

          var hashParams = {};
          var e, r = /([^&;=]+)=?([^&;]*)/g,
              q = window.location.hash.substring(1);
          while ( e = r.exec(q)) {
             hashParams[e[1]] = decodeURIComponent(e[2]);
          }
          return hashParams;
        }

        var userProfileSource = document.getElementById('user-profile-template').innerHTML,
            userProfileTemplate = Handlebars.compile(userProfileSource),
            userProfilePlaceholder = document.getElementById('user-profile');

        var oauthSource = document.getElementById('oauth-template').innerHTML,
            oauthTemplate = Handlebars.compile(oauthSource),
            oauthPlaceholder = document.getElementById('oauth');

        var params = getHashParams();


        var access_token = params.access_token,

            refresh_token = params.refresh_token,
            error = params.error;

        if (error) {
          alert('There was an error during the authentication');
        } else {
          if (access_token) {
            // render oauth info
            oauthPlaceholder.innerHTML = oauthTemplate({
              access_token: access_token,
              refresh_token: refresh_token

            });

            $.ajax({
                url: 'https://api.spotify.com/v1/me',
                headers: {
                  'Authorization': 'Bearer ' + access_token
                },
                success: function(response) {
                  userProfilePlaceholder.innerHTML = userProfileTemplate(response);

                  $('#login').hide();
                  $('#loggedin').show();
                }
            });
          } else {
              // render initial screen
              $('#login').show();
              $('#loggedin').hide();
          }

          document.getElementById('obtain-new-token').addEventListener('click', function() {
            $.ajax({
              url: '/refresh_token',
              data: {
                'refresh_token': refresh_token
              }
            }).done(function(data) {
              access_token = data.access_token;
              oauthPlaceholder.innerHTML = oauthTemplate({
                access_token: access_token,
                refresh_token: refresh_token

              });
            });
          }, false);
        }
      })();

  </script>

<link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

  </body>
</html>

